<main>
  <div class="flex justify-between">
    <h3 class="font-bold text-lg pt-4">Insurance Policies</h3>
    <button nz-button nzSize="large" nzType="primary" class="flex items-center gap-2 bg-primaryBlue-300" (click)="showModal()"><span class="material-icons">library_add</span>Add New Policy</button>
  </div>

  <section>
    <app-basic-table [data]="filteredPolicies" [isLoading]="isLoading"></app-basic-table>
  </section>

  <section>
    <nz-modal
    [(nzVisible)]="isVisible"
    [nzTitle]="modalTitle"
    [nzContent]="modalContent"
    [nzFooter]="modalFooter"
    (nzOnCancel)="handleCancel()"
    nzWidth="45rem"
  >
    <ng-template #modalTitle>Add New Insurance Policy</ng-template>

    <ng-template #modalContent>
      <form nz-form [formGroup]="policyForm" class="login-form">
        <nz-form-item>
          <nz-form-control nzErrorTip="Please enter policy name!">
            <nz-input-group nzPrefixIcon="file-add">
              <input type="text" class="p-1" nz-input formControlName="policyName" placeholder="Policy Name" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control nzErrorTip="Please provide the insurance type!">
            <nz-input-group nzPrefixIcon="file-text">
              <input type="text" class="p-1" nz-input formControlName="type" placeholder="Insurance Type" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control nzErrorTip="Please provide the policy number!">
            <nz-input-group nzPrefixIcon="number">
              <input type="text" class="p-1" nz-input formControlName="policyNo" placeholder="Policy Number" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control nzErrorTip="Please input a valid premium amount!">
            <nz-input-group nzPrefixIcon="dollar">
              <input type="text" class="p-1" nz-input formControlName="premium" placeholder="Premium Amount" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
      </form>
    </ng-template>

    <ng-template #modalFooter>
      <button nz-button nzType="default" nzSize="large" (click)="handleCancel()">Cancel</button>
      <button nz-button nzType="primary" class="bg-primaryBlue-300" nzSize="large" (click)="submitPolicy()" [nzLoading]="isConfirmLoading">Create Policy</button>
    </ng-template>
  </nz-modal>
  </section>
</main>
